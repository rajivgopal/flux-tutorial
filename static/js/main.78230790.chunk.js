(window["webpackJsonpflux-tutorial"]=window["webpackJsonpflux-tutorial"]||[]).push([[0],{33:function(e,t,n){e.exports=n(50)},50:function(e,t,n){"use strict";n.r(t);n(34);var r=n(0),a=n.n(r),c=n(12),u=n(3),o=function(){var e={color:"orange"};return a.a.createElement("nav",null,a.a.createElement(u.c,{activeStyle:e,exact:!0,to:"/"},"Home")," ","|"," ",a.a.createElement(u.c,{activeStyle:e,to:"/courses"},"Courses")," ","|"," ",a.a.createElement(u.c,{activeStyle:e,to:"/authors"},"Authors")," ","|"," ",a.a.createElement(u.c,{activeStyle:e,to:"/about"},"About"))},l=n(11),i=function(){return a.a.createElement("div",{className:"jumbotran"},a.a.createElement("h1",null,"React Flux Tutorial"),a.a.createElement("p",null," Managing courses"))},s=n(4),h=n(1),m=n.n(h),f=(m.a.shape({id:m.a.number,title:m.a.string.isRequired,authorId:m.a.number,category:m.a.string.isRequired}),m.a.shape({id:m.a.number,name:m.a.string.isRequired}),function(e){var t=e.courses,n=e.deleteCourse,r=e.authors;return a.a.createElement("table",{className:"table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\xa0"),a.a.createElement("th",null,"Title"),a.a.createElement("th",null,"Author Id"),a.a.createElement("th",null,"Category"))),a.a.createElement("tbody",null,t.map(function(e){var t=function(e,t){var n=e.find(function(e){return e.id===t.authorId});return n?n.name:""}(r,e);return a.a.createElement("tr",{key:e.id},a.a.createElement("td",null,a.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){return n(e.id)}},"Delete")),a.a.createElement("td",null,a.a.createElement(u.b,{to:"/course/"+e.slug},e.title)),a.a.createElement("td",null,t),a.a.createElement("td",null,e.category))})))});f.defaultProps={courses:[]};var E=f;var d=n(14),p=n(15),b=n(18),g=n(16),O=n(19),v=n(17),y=new(n(29).Dispatcher),A={LOAD_COURSES:"LOAD_COURSES",LOAD_COURSE_BY_SLUG:"LOAD_COURSE_BY_SLUG",ADD_COURSE:"ADD_COURSE",UPDATE_COURSE:"UPDATE_COURSE",DELETE_COURSE:"DELETE_COURSE"},C=[],j=new(function(e){function t(){return Object(d.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(p.a)(t,[{key:"addChangeListener",value:function(e){this.on("change",e)}},{key:"removeChangeListener",value:function(e){this.removeListener("change",e)}},{key:"emitChange",value:function(){this.emit("change")}},{key:"getCourses",value:function(){return C}},{key:"getCourseBySlug",value:function(e){return C.find(function(t){return t.slug===e})}}]),t}(v.EventEmitter));y.register(function(e){switch(e.type){case A.ADD_COURSE:C.push(e.course),j.emitChange();break;case A.UPDATE_COURSE:C=C.map(function(t){return t.id===e.course.id?e.course:t}),j.emitChange();break;case A.DELETE_COURSE:C=C.filter(function(t){return t.id!==parseInt(e.id,10)}),j.emitChange();break;case A.LOAD_COURSES:C=e.courses,j.emitChange()}});var S=j,D=n(10),P=n(23),U=n.n(P),_=n(30);function R(e){return T.apply(this,arguments)}function T(){return(T=Object(_.a)(U.a.mark(function e(t){var n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:if(400!==t.status){e.next=7;break}return e.next=5,t.text();case 5:throw n=e.sent,new Error(n);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e){throw console.error("API call failed. "+e),e}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach(function(t){Object(D.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=Object({NODE_ENV:"production",PUBLIC_URL:"/flux-tutorial"}).REACT_APP_API_URL+"/courses/";function I(){return fetch(N).then(R).catch(L).then(function(e){y.dispatch({type:A.LOAD_COURSES,courses:e})})}function x(e){return function(e){return fetch(N+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(k({},e,{authorId:parseInt(e.authorId,10)}))}).then(R).catch(L)}(e).then(function(t){y.dispatch({type:e.id?A.UPDATE_COURSE:A.ADD_COURSE,course:t})})}function H(e){return(t=e,fetch(N+t,{method:"DELETE"}).then(R).catch(L)).then(function(){y.dispatch({type:A.DELETE_COURSE,id:e})});var t}var B=n(8),F={LOAD_AUTHORS:"LOAD_AUTHORS",SAVE_AUTHOR:"SAVE_AUTHOR",UPDATE_AUTHOR:"UPDATE_AUTHOR",DELETE_AUTHOR:"DELETE_AUTHOR"},V=[],J=new(function(e){function t(){return Object(d.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(p.a)(t,[{key:"addChangeListener",value:function(e){this.on("change",e)}},{key:"removeChangeListener",value:function(e){this.removeListener("change",e)}},{key:"emitChange",value:function(){this.emit("change")}},{key:"getAuthors",value:function(){return V}},{key:"getAuthorsById",value:function(e){return V.find(function(t){return t.id===e})}}]),t}(v.EventEmitter));y.register(function(e){switch(e.type){case F.LOAD_AUTHORS:V=e.authors,J.emitChange();break;case F.SAVE_AUTHOR:V.push(e.author),J.emitChange();break;case F.UPDATE_AUTHOR:V=V.map(function(t){return V.id===t.id?e.author:t}),J.emitChange();break;case F.DELETE_AUTHOR:V=V.filter(function(t){return t.id!==parseInt(e.id,10)}),J.emitChange()}});var q=J,M=Object({NODE_ENV:"production",PUBLIC_URL:"/flux-tutorial"}).REACT_APP_API_URL+"/authors/";function G(){return fetch(M).then(R).catch(L).then(function(e){y.dispatch({type:F.LOAD_AUTHORS,authors:e})})}function Y(e){return(t=e,fetch(M+(t.id||""),{method:t.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(R).catch(L)).then(function(t){y.dispatch({type:e.id?F.UPDATE_AUTHOR:F.SAVE_AUTHOR,author:t})});var t}function z(e){return(t=e,fetch(M+t,{method:"DELETE"}).then(R).catch(L)).then(function(){y.dispatch({type:F.DELETE_AUTHOR,id:e})});var t}var K=function(){var e=Object(r.useState)(S.getCourses()),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(q.getAuthors()),l=Object(s.a)(o,2),i=l[0],h=l[1];function m(){c(S.getCourses()),h(q.getAuthors())}Object(r.useEffect)(function(){return S.addChangeListener(m),0===S.getCourses().length&&(I(),G()),function(){return S.removeChangeListener(m)}},[]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Courses"),a.a.createElement(u.b,{className:"btn btn-primary",to:"/course"},"Add Course"),a.a.createElement(E,{courses:n,deleteCourse:function(e){H(e).then(function(){B.b.success("Course deleted successfully")})},authors:i}))},Q=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"About"),a.a.createElement("p",null,"This page uses React flux"))},W=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Page Not Found"),a.a.createElement("p",null," ",a.a.createElement(u.b,{to:"/"},"Home Page")))},X=function(e){var t=e.id,n=e.label,r=e.name,c=e.value,u=e.onChange,o=e.error,l="form-group";return(o||o.length>0)&&(l+=" has-error"),a.a.createElement("div",{className:l},a.a.createElement("label",{htmlFor:t},n),a.a.createElement("div",{className:"field"},a.a.createElement("input",{id:t,type:"text",name:r,className:"form-control",value:c,onChange:u})),o&&a.a.createElement("div",{className:"alert alert-danger"},o))};X.defaultProps={error:""};var Z=X,$=function(e){var t=e.id,n=e.label,r=e.name,c=e.value,u=e.onChange,o=e.error,l=e.options;return a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:t},n),a.a.createElement("div",{className:"field"},a.a.createElement("select",{id:t,name:r,value:c,className:"form-control",onChange:u},a.a.createElement("option",{key:"-1",value:""},"Select value"),l)),o&&a.a.createElement("div",{className:"alert alert-danger"},o))};$.defaultProps={error:""};var ee=$;var te=function(e){var t=e.onSubmit,n=e.course,r=e.onChange,c=e.errors,u=e.authors.map(function(e){return a.a.createElement("option",{key:e.id,value:e.id},e.name)});return a.a.createElement("form",{onSubmit:t},a.a.createElement(Z,{label:"Title",id:"title",name:"title",value:n.title,onChange:r,error:c.title}),a.a.createElement(ee,{label:"Author",id:"author",name:"authorId",value:n.authorId||0,onChange:r,error:c.authorId,options:u}),a.a.createElement(Z,{label:"Category",id:"category",name:"category",value:n.category,onChange:r,error:c.category}),a.a.createElement("input",{type:"submit",value:"Save",className:"btn btn-primary"}))};function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var re=function(e){var t=Object(r.useState)(S.getCourses()),n=Object(s.a)(t,2),c=n[0],u=n[1],o=Object(r.useState)(q.getAuthors()),l=Object(s.a)(o,2),i=l[0],h=l[1],m=Object(r.useState)({}),f=Object(s.a)(m,2),E=f[0],d=f[1],p=Object(r.useState)({id:null,slug:"",title:"",authorId:null,category:""}),b=Object(s.a)(p,2),g=b[0],O=b[1];function v(){u(S.getCourses()),h(q.getAuthors())}Object(r.useEffect)(function(){var t=e.match.params.slug;if(S.addChangeListener(v),0===c.length)I(),G();else if(t){var n=S.getCourseBySlug(t);null==n&&e.history.push("/dummy"),O(n)}return function(){return S.removeChangeListener(v)}},[e.match.params.slug,c.length,e.history]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null," Manage Course"),a.a.createElement(te,{errors:E,onSubmit:function(t){t.preventDefault(),function(){var e={};g.title||(e.title="Invalid title");g.authorId||(e.authorId="Invalid author id");g.category||(e.category="Invalid catgory");return d(e),0===Object.keys(e).length}()&&x(g).then(function(){e.history.push("/courses"),B.b.success("Course saved")})},onChange:function(e){var t=e.target,n=t.name,r=t.value,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach(function(t){Object(D.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},g,Object(D.a)({},n,r));O(a)},course:g,authors:i}))},ae=function(e){var t=e.authors,n=e.deleteAuthor;return a.a.createElement("table",{className:"table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\xa0"),a.a.createElement("th",null,"Author Id"),a.a.createElement("th",null,"Author Name"))),a.a.createElement("tbody",null,t.map(function(e){return a.a.createElement("tr",{key:e.id},a.a.createElement("td",null,a.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){return n(e.id)}},"Delete")),a.a.createElement("td",null,e.id),a.a.createElement("td",null,e.name))})))};ae.defaultProps={authors:[]};var ce=ae,ue=function(){var e=Object(r.useState)(q.getAuthors()),t=Object(s.a)(e,2),n=t[0],c=t[1];function o(){c(q.getAuthors())}Object(r.useEffect)(function(){return q.addChangeListener(o),0===q.getAuthors().length&&G(),function(){return q.removeChangeListener(o)}},[]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Authors"),a.a.createElement(u.b,{className:"btn btn-primary",to:"/author"},"Add Author"),a.a.createElement(ce,{authors:n,deleteAuthor:function(e){z(e).then(function(){B.b.success("Author deleted successfully")})}}))};var oe=function(e){var t=e.onSubmit,n=e.onChange,r=e.errors,c=e.author;return a.a.createElement("form",{onSubmit:t},a.a.createElement(Z,{label:"Author Name",id:"name",name:"name",value:c.name,onChange:n,error:r.name}),a.a.createElement("input",{type:"submit",value:"Save",className:"btn btn-primary"}))};function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var ie=function e(t){var n=Object(r.useState)(q.getAuthors()),c=Object(s.a)(n,2),u=c[0],o=c[1],l=Object(r.useState)({}),i=Object(s.a)(l,2),h=i[0],m=i[1],f=Object(r.useState)({id:null,name:""}),E=Object(s.a)(f,2),d=E[0],p=E[1];function b(){o(q.getAuthors())}Object(r.useEffect)(function(){var e=t.match.params.id;if(q.addChangeListener(b),0===u.length)G();else if(e){var n=q.getAuthorsById(e);null==n&&t.history.push("/dummy"),p(n)}return function(){return q.removeChangeListener(b)}},[t.match.params.id,u.length,t.history]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null," Manage Author"),a.a.createElement(oe,{errors:h,onSubmit:function(e){e.preventDefault(),function(){var e={};d.name||(e.name="Invalid author name");return m(e),0===Object.keys(e).length}()&&Y(d).then(function(){t.history.push("/authors"),B.b.success("Author saved")})},onChange:function(t){var n=t.target,r=n.name,a=n.value,c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(n,!0).forEach(function(t){Object(D.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,Object(D.a)({},r,a));p(c)},author:d}))},se=(n(49),function(){return a.a.createElement("div",{className:"container-fluid"},a.a.createElement(B.a,{autoClose:3e3,hideProgressBar:!0}),a.a.createElement(o,null),a.a.createElement(l.c,null,a.a.createElement(l.a,{exact:!0,path:"/",component:i}),a.a.createElement(l.a,{exact:!0,path:"/courses",component:K}),a.a.createElement(l.a,{exact:!0,path:"/course/:slug",component:re}),a.a.createElement(l.a,{exact:!0,path:"/course",component:re}),a.a.createElement(l.a,{exact:!0,path:"/authors",component:ue}),a.a.createElement(l.a,{exact:!0,path:"/author",component:ie}),a.a.createElement(l.a,{exact:!0,path:"/about",component:Q}),a.a.createElement(l.a,{component:W})))});Object(c.render)(a.a.createElement(u.a,null,a.a.createElement(se,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.78230790.chunk.js.map